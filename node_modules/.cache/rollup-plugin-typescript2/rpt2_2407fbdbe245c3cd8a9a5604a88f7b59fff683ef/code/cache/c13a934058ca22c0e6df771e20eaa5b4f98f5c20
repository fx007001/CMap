{"code":"export default function initBMap() {\r\n    var BMapGL = window.BMapGL || {}, BMapGLLib = window.BMapGLLib || {};\r\n    var _a = this.$options, id = _a.id, _b = _a.points, points = _b === void 0 ? [116.404, 39.915] : _b, areaName = _a.areaName, _c = _a.poiText, poiText = _c === void 0 ? true : _c, //是否显示POI信息 \r\n    _d = _a.poiIcon, //是否显示POI信息 \r\n    poiIcon = _d === void 0 ? true : _d, //是否显示POI图标信息 \r\n    _e = _a.zoom, //是否显示POI图标信息 \r\n    zoom = _e === void 0 ? 10 : _e, _f = _a.drivingPath, drivingPath = _f === void 0 ? [] : _f, _g = _a.enableScrollWheel, enableScrollWheel = _g === void 0 ? false : _g, _h = _a.isScaleCtrl, isScaleCtrl = _h === void 0 ? false : _h, _j = _a.isZoomCtrl, isZoomCtrl = _j === void 0 ? false : _j, _k = _a.navi3DCtrl, navi3DCtrl = _k === void 0 ? false : _k, // 添加3D控件\r\n    _l = _a.enclosure, // 添加3D控件\r\n    enclosure = _l === void 0 ? {} : _l, drivingType = _a.drivingType;\r\n    var map = new BMapGL.Map(id);\r\n    var point = this.$options.points && points.length === 2 ? new BMapGL.Point(points[0], points[1]) : null;\r\n    map.centerAndZoom(point !== null && point !== void 0 ? point : areaName, zoom);\r\n    map.enableScrollWheelZoom(enableScrollWheel);\r\n    map.setDisplayOptions({\r\n        poiText: poiText,\r\n        poiIcon: poiIcon\r\n    });\r\n    // 添加3D控件\r\n    if (navi3DCtrl) {\r\n        var ctrl3D = new BMapGL.NavigationControl3D();\r\n        map.addControl(ctrl3D);\r\n    }\r\n    // 添加比例尺控件\r\n    if (isScaleCtrl) {\r\n        var scaleCtrl = new BMapGL.ScaleControl();\r\n        map.addControl(scaleCtrl);\r\n    }\r\n    // 添加缩放控件\r\n    if (isZoomCtrl) {\r\n        var zoomCtrl = new BMapGL.ZoomControl();\r\n        map.addControl(zoomCtrl);\r\n    }\r\n    // 轨迹配置\r\n    if (drivingPath && drivingPath.length >= 2) {\r\n        var startPints = [drivingPath[0].lng, drivingPath[0].lat];\r\n        var endPints = [drivingPath.at(-1).lng, drivingPath.at(-1).lat];\r\n        // 起始结束点位计算路径\r\n        if (drivingType && drivingType === 'path') {\r\n            var start = new BMapGL.Point(startPints[0], startPints[1]);\r\n            var end = new BMapGL.Point(endPints[0], endPints[1]);\r\n            var driving = new BMapGL.DrivingRoute(map, {\r\n                renderOptions: {\r\n                    map: map,\r\n                    autoViewport: true\r\n                }\r\n            });\r\n            driving.search(start, end);\r\n        }\r\n        else {\r\n            map.centerAndZoom(new BMapGL.Point(startPints[0], startPints[1]));\r\n            var point_1 = [];\r\n            for (var i = 0; i < drivingPath.length; i++) {\r\n                point_1.push(new BMapGL.Point(drivingPath[i].lng, drivingPath[i].lat));\r\n            }\r\n            var pl_1 = new BMapGL.Polyline(point_1, {\r\n                strokeColor: \"#6699FF\",\r\n                strokeWeight: 6\r\n            });\r\n            var markerST = new BMapGL.Marker(new BMapGL.Point(startPints[0], startPints[1]), {\r\n                title: '起点'\r\n            });\r\n            var markerEND = new BMapGL.Marker(new BMapGL.Point(endPints[0], endPints[1]), {\r\n                title: '终点'\r\n            });\r\n            setTimeout(function () {\r\n                var trackAni = new BMapGLLib.TrackAnimation(map, pl_1, {\r\n                    overallView: true,\r\n                    tilt: 30,\r\n                    duration: 4000,\r\n                    delay: 300 // 动画开始的延迟，默认0，单位ms\r\n                });\r\n                trackAni.start();\r\n                map.addOverlay(markerST);\r\n                map.addOverlay(markerEND);\r\n            }, 1000);\r\n        }\r\n    }\r\n    // 围栏配置\r\n    if ((enclosure && enclosure.type === 'circle') || enclosure && enclosure.point) {\r\n        var _m = enclosure.fillColor, fillColor = _m === void 0 ? \"#6699FF\" : _m, _o = enclosure.fillOpacity, fillOpacity = _o === void 0 ? 0.3 : _o, _p = enclosure.strokeColor, strokeColor = _p === void 0 ? \"#6699FF\" : _p, _q = enclosure.strokeWeight, strokeWeight = _q === void 0 ? 2 : _q, _r = enclosure.strokeOpacity, strokeOpacity = _r === void 0 ? 1 : _r, point_2 = enclosure.point, radius = enclosure.radius;\r\n        var circle = new BMapGL.Circle(new BMapGL.Point(point_2[0], point_2[1]), radius, {\r\n            fillColor: fillColor,\r\n            fillOpacity: fillOpacity,\r\n            strokeColor: strokeColor,\r\n            strokeWeight: strokeWeight,\r\n            strokeOpacity: strokeOpacity\r\n        });\r\n        map.addOverlay(circle); // 添加到地图中\r\n    }\r\n    else if (enclosure && enclosure.points || enclosure && enclosure.type === 'polygon') {\r\n        var _s = enclosure.fillColor, fillColor = _s === void 0 ? \"#6699FF\" : _s, _t = enclosure.fillOpacity, fillOpacity = _t === void 0 ? 0.3 : _t, _u = enclosure.strokeColor, strokeColor = _u === void 0 ? \"#6699FF\" : _u, _v = enclosure.strokeWeight, strokeWeight = _v === void 0 ? 2 : _v, _w = enclosure.strokeOpacity, strokeOpacity = _w === void 0 ? 1 : _w, _x = enclosure.points, points_1 = _x === void 0 ? [] : _x;\r\n        var pl = [];\r\n        for (var i = 0; i < points_1.length; i++) {\r\n            pl.push(new BMapGL.Point(points_1[i].lng, points_1[i].lat));\r\n        }\r\n        var polygon = new BMapGL.Polygon(pl, {\r\n            fillColor: fillColor,\r\n            fillOpacity: fillOpacity,\r\n            strokeColor: strokeColor,\r\n            strokeWeight: strokeWeight,\r\n            strokeOpacity: strokeOpacity\r\n        });\r\n        map.addOverlay(polygon);\r\n    }\r\n}\r\n","references":[]}
