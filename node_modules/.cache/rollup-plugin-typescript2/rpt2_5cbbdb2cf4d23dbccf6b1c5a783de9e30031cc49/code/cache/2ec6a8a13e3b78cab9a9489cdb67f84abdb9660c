{"code":"import initBMapFn from './BMap';\r\nimport initAMapFn from './AMap';\r\nimport initTMapFn from './TMap';\r\nvar CMap = /** @class */ (function () {\r\n    function CMap(options) {\r\n        // 初始百度地图 - 抹平API操作\r\n        this.initBMap = initBMapFn;\r\n        // 初始化高德地图 - 抹平API操作\r\n        this.initAMap = initAMapFn;\r\n        // 初始腾讯德地图 - 抹平API操作\r\n        this.initTMap = initTMapFn;\r\n        this.$options = options;\r\n        this.mapAk = '';\r\n        this.initMap();\r\n        // console.log(this.$options)\r\n    }\r\n    // 初始化地图 \r\n    CMap.prototype.initMap = function () {\r\n        var type = this.$options.type;\r\n        this.getMapAK(type);\r\n        if (type && type === 'TMAP') {\r\n            this.createTMap();\r\n        }\r\n        else if (type && type === 'AMAP') {\r\n            this.createAMap();\r\n        }\r\n        else if (type && type === 'BMAP') {\r\n            this.createBMap();\r\n        }\r\n    };\r\n    // 获取地图的ak\r\n    CMap.prototype.getMapAK = function (type) {\r\n        var mapAk = this.$options.mapAk;\r\n        if (mapAk) {\r\n            this.mapAk = mapAk;\r\n        }\r\n        else {\r\n            switch (type) {\r\n                case 'TMAP': {\r\n                    this.mapAk = 'OB4BZ-D4W3U-B7VVO-4PJWW-6TKDJ-WPB77';\r\n                    break;\r\n                }\r\n                case 'AMAP': {\r\n                    this.mapAk = 'c081218aae02057742b9f1a100d6cf66';\r\n                    break;\r\n                }\r\n                default: {\r\n                    this.mapAk = 'f7HnzEYGLgOyMyDVTh99ZEQqjlEzuhyC';\r\n                }\r\n            }\r\n        }\r\n    };\r\n    // 初始化百度地图\r\n    CMap.prototype.createBMap = function () {\r\n        var self = this, wd = window || {};\r\n        var drivingPath = this.$options.drivingPath;\r\n        wd.BMapGL_loadScriptTime = (new Date).getTime();\r\n        wd.BMapGL = wd.BMapGL || {};\r\n        wd.BMapGL.apiLoad = function () {\r\n            delete wd.BMapGL.apiLoad;\r\n            if (typeof self.initBMap == \"function\") {\r\n                self.initBMap();\r\n            }\r\n        };\r\n        var s = document.createElement('script');\r\n        s.src = \"http://api.map.baidu.com/getscript?type=webgl&v=1.0&ak=\".concat(self.mapAk, \"&services=&t=\").concat((new Date).getTime());\r\n        document.body.appendChild(s);\r\n        var link = document.createElement('link');\r\n        link.setAttribute('rel', 'stylesheet');\r\n        link.setAttribute('type', 'text/css');\r\n        link.setAttribute('href', 'http://api.map.baidu.com/res/webgl/10/bmap.css');\r\n        document.getElementsByTagName('head')[0].appendChild(link);\r\n        if (drivingPath && drivingPath.length >= 2) {\r\n            var trackAnim = document.createElement('script');\r\n            trackAnim.src = \"//mapopen.bj.bcebos.com/github/BMapGLLib/TrackAnimation/src/TrackAnimation.min.js\";\r\n            document.body.appendChild(trackAnim);\r\n        }\r\n    };\r\n    // 初始化高德地图 - 加载\r\n    CMap.prototype.createAMap = function () {\r\n        console.log('高德');\r\n        var self = this;\r\n        var url = \"https://webapi.amap.com/maps?v=2.0&key=\".concat(self.mapAk, \"&&plugin=AMap.Scale,AMap.HawkEye,AMap.ToolBar,AMap.MapType\");\r\n        var jsapi = document.createElement('script');\r\n        jsapi.src = url;\r\n        document.body.appendChild(jsapi);\r\n        jsapi.onload = function () {\r\n            console.log(112, window);\r\n            self.initAMap();\r\n        };\r\n    };\r\n    // 初始化腾讯地图 - 加载\r\n    CMap.prototype.createTMap = function () {\r\n        var self = this;\r\n        var url = \"https://map.qq.com/api/gljs?v=1.exp&key=\".concat(self.mapAk);\r\n        var jsapi = document.createElement('script');\r\n        jsapi.src = url;\r\n        document.body.appendChild(jsapi);\r\n        jsapi.onload = function () {\r\n            self.initTMap();\r\n        };\r\n    };\r\n    return CMap;\r\n}());\r\nexport { CMap };\r\n","references":["/Users/itcast_web/Desktop/CMap/src/BMap.ts","/Users/itcast_web/Desktop/CMap/src/AMap.ts","/Users/itcast_web/Desktop/CMap/src/TMap.ts"]}
